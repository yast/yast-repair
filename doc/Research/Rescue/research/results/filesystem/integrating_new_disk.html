<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>http://support.suse.de/sdb/de/html/neue_hd.html</TITLE>
<BASE HREF="http://support.suse.de/sdb/de/html/">
</HEAD><BODY BGCOLOR="#ffffff"><H2>Einhängen einer neuen Festplatte/Partition</H2>

<strong>
</strong><p>
</FORM>
<H5>Supportdatenbank (neue_hd)</H5>
<h3>Anliegen:</h3>
Der Platz auf Ihrem System wird knapp und Sie haben eine neue (größere?)
Festplatte eingebaut. Dieser Artikel soll nun beschreiben, wie Sie ein
Unterverzeichnis (z.B. /home, /usr, /opt) auf diese Partition "verschieben".
Das ganze erfolgt anhand des Beispiels /home, das auf der Root-Partition
/dev/hda1 liegt. Neue Festplatte soll /dev/hdc1 sein; welches Verzeichnis in
Ihrem Falle am besten geeignet ist, müssen Sie selbst anhand des Platzbedarfes
der Verzeichnisse entscheiden.

<h3>Wichtig:</h3>
Diese Vorgehen sollte nur von geübteren Benutzern ausgeführt werden, da
es ein gutes Verständnis des Systems voraussetzt. Beachten Sie bitte
auch, daß wir auf dieses Verfahren (und etwaige Fehler) <emph>keinen</emph> 
Installationssupport leisten können.

<h3>Vorgehen:</h3>
<ol>
<li>	Arbeiten Sie <emph>nicht</emph> im laufenden System, sondern arbeiten
	Sie mit dem SuSE Linux Rettungssystem.
<li> 	Partitionieren Sie die neue Festplatte:

<pre>
fdisk /dev/hdc
</pre>

	und erzeugen ein Dateisystem darauf:
	
<pre>
mke2fs /dev/hdc1
</pre>

<li> 	Erzeugen Sie Mountpoints für die beiden Festplatten
	
<pre>
mkdir /mnt/OLD
mkdir /mnt/NEW
</pre>

	und mounten diese:
<pre>
mount -t ext2 /dev/hda1 /mnt/OLD
mount -t ext2 /dev/hdc1 /mnt/NEW
</pre>

<li>	Kopieren Sie das Verzeichnis /home der Root-Partition auf die
	neue Festplatte. Damit die Eigentümer, Benutzerrechte und Links
	erhalten bleiben, erfolgt dies über tar:

<pre>
cd /mnt/OLD/home
tar -cpf - . --numeric-owner | ( cd /mnt/NEW && tar xpvf - )
</pre>

<li>	Schieben Sie das /home-Verzeichnis weg und legen ein leeres /home
	als Mountpoint für die neue Platte an:

<pre>
cd /
mv /mnt/OLD/home /mnt/OLD/home.old
mkdir /mnt/OLD/home
</pre>

<li>	Passen Sie die fstab der Root-Partition (/mnt/OLD/etc/fstab)
	mit einem Editor (z.B. vi) an die neue Partition an, z.B. durch
	Einfügen des Eintrages:
<pre>
/dev/hdc1	/home	ext2	defaults	1 1
</pre>

<li>	Wechseln Sie ins Verzeichnis /, unmounten die Festplatten und
	booten neu:

<pre>
cd /
umount /mnt/OLD
umount /mnt/NEW
shutdown -r now
</pre>

<li>	Wenn alles geklappt hat können Sie dann /home.old löschen. Aber
	bitte erst, wenn Sie sicher sind, daß alles OK ist.
</ol>
<HR>
<strong>Siehe auch:</strong>
<ul>
<a href="maddin_kopieren.html">SuSE Linux umkopieren</a><br>
</ul>
<HR>
<strong>Stichwörter:</strong> <a href=keylist.NEUE.html>NEUE</a>, <a href=keylist.FESTPLATTE.html>FESTPLATTE</a>, <a href=keylist.UMKOPIEREN.html>UMKOPIEREN</a>, <a href=keylist.ROOT.html>ROOT</a>, <a href=keylist.PARTITION.html>PARTITION</a><br>
<HR>
<ADDRESS>
SDB-neue_hd, Copyright <a href="http://www.suse.de/">SuSE GmbH</a>, Nürnberg, Germany
 - Version: 13. Apr 1999
<br><A HREF="http://www.suse.de/de/suse/index.html">SuSE GmbH</A> - Zuletzt generiert: 20. Dez 2000 von me (sdb_gen 1.20.0)
</ADDRESS>
</BODY></HTML>