/*
 * YaST2: Modules testsuite
 *
 * Description:
 *   Testsuite for YaST2 OS Repair: OSRComputeModuleSequence() in file osr_system.ycp
 *
 * Authors:
 *   Michael Koehrmann <curry@suse.de>
 */
{
    include "testsuite.ycp";
    include "osr/osr_system.ycp";

    map  osr_map    = $[];
    map  provides_1 = $[];
    map  provides_2 = $[];
    map  provides_3 = $[];
    list requires_1 = [];
    list requires_2 = [];
    list requires_3 = [];

    // Test 1
    provides_1 = $["a" : $[], "b" : $[]];
    requires_1 = [];
    provides_2 = $["c" : $[], "d" : $[]];
    requires_2 = ["a"];
    provides_3 = $["e" : $[]];
    requires_3 = ["b", "c"];

    osr_map = $[
		    "module_list" : [ "module_1", "module_2", "module_3" ],
		    "module_sequence" : [],
		    "module_1" : $[
				   "requires" : requires_1,
				   "provides" : provides_1,
		    ],
		    "module_2" : $[
				   "requires" : requires_2,
				   "provides" : provides_2,
		    ],
		    "module_3" : $[
				   "requires" : requires_3,
				   "provides" : provides_3,
		    ]
    ];
    
    TEST(``(OSRComputeModuleSequence()), [], nil);
    TEST(``(OSRTestGetOsrMap()), [], nil);

    // Test 2
    provides_1 = $["a" : $[], "b" : $[]];
    requires_1 = [];
    provides_2 = $["c" : $[], "d" : $[]];
    requires_2 = ["a", "e"];
    provides_3 = $["e" : $[]];
    requires_3 = ["b", "c"];

    osr_map = $[
		    "module_list" : [ "module_1", "module_2", "module_3" ],
		    "module_sequence" : [],
		    "module_1" : $[
				   "requires" : requires_1,
				   "provides" : provides_1,
		    ],
		    "module_2" : $[
				   "requires" : requires_2,
				   "provides" : provides_2,
		    ],
		    "module_3" : $[
				   "requires" : requires_3,
				   "provides" : provides_3,
		    ]
    ];
    
    TEST(``(OSRComputeModuleSequence()), [], nil);
    TEST(``(OSRTestGetOsrMap()), [], nil);
    
}
